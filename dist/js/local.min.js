var PositionItem=React.createClass({displayName:"PositionItem",render:function(){var t=null;return""==this.props.description&&(t=React.createElement("p",{className:""==this.props.description?"hidden":"list-group-item-text"},React.createElement("span",{"aria-hidden":"true",className:"glyphicon glyphicon-comment"})," ",this.props.description)),React.createElement("a",{className:"list-group-item",href:"#"},React.createElement("p",{className:"list-group-item-text"},React.createElement("span",{"aria-hidden":"true",className:"glyphicon glyphicon-map-marker"})," ",React.createElement("strong",null,this.props.latitude,", ",this.props.longitude)),React.createElement("p",{className:"list-group-item-text"},React.createElement("span",{"aria-hidden":"true",className:"glyphicon glyphicon-time"})," ",this.props.timestamp),t)}}),POSITION_TEMPLATE=Object.assign({},{id:0,description:"",latitude:0,longitude:0,timestamp:0}),GeoLog=React.createClass({displayName:"GeoLog",propTypes:{onClick:React.PropTypes.func.isRequired},getInitialState:function(){return{id:0,position:POSITION_TEMPLATE,positions:[]}},componentDidMount:function(){var t=parseInt(localStorage.getItem("id")||0),e=JSON.parse(localStorage.getItem("positions"))||[];this.setState({id:t,positions:e})},render:function(){var t=[];return _.orderBy(this.state.positions,["timestamp"],["desc"]).forEach(function(e){t.push(React.createElement(PositionItem,{description:e.description,latitude:e.latitude,longitude:e.longitude,timestamp:e.timestamp}))}),React.createElement("div",null,React.createElement("div",{className:"container"},React.createElement("div",{className:"page-header"},React.createElement("h1",null,"GeoLog")),React.createElement("button",{className:"btn btn-lg btn-success btn-block",onClick:this.addPosition},"Add position"),React.createElement("hr",null),React.createElement("div",{className:"list-group"},t)))},updateStorage:function(){localStorage.setItem("id",this.state.id),localStorage.setItem("positions",JSON.stringify(this.state.positions))},addPosition:function(t){navigator.geolocation.getCurrentPosition(this.getPositionSuccess,this.getPositionError)},getPositionSuccess:function(t){var e=this.state.id+1,t=Object.assign({},this.state.position,{id:e,latitude:t.coords.latitude,longitude:t.coords.longitude,timestamp:t.timestamp}),i=this.state.positions;i.push(t),this.setState({id:e,positions:i},this.updateStorage)},getPositionError:function(t){console.log("code: %s, message: %s",t.code,t.message)}});